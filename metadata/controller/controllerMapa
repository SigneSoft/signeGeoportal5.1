{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "controllerMapa",
        "views": [
            "PrintPreview"
        ]
    },
    "name": "MyController",
    "designerId": "57b5bd24-aacb-4e2b-b591-bcf482d529b8",
    "cn": [
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#btnEnfocar",
                "designer|params": [
                    "button",
                    "e",
                    "eOpts"
                ],
                "designer|targetType": "Ext.button.Button",
                "fn": "onBtnEnfocarClick",
                "implHandler": [
                    "signeGeoportal.xMap.map.zoomToScale(2000000,false);",
                    "",
                    "//signePortal.xMap.zoomToExtent(new OpenLayers.Bounds(minLng,minLat,maxLng,maxLat));"
                ],
                "name": "click"
            },
            "name": "onBtnEnfocarClick",
            "designerId": "f6bd9f62-343b-4527-8cf1-f2e3728865e0"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#btnEliminarCapa",
                "designer|params": [
                    "button",
                    "e",
                    "eOpts"
                ],
                "designer|targetType": "Ext.button.Button",
                "fn": "onBtnEliminarCapaClick",
                "implHandler": [
                    "var arbolCapa = Ext.getCmp(\"treelayer\");",
                    "record = arbolCapa.getSelectionModel().getSelection()[0];",
                    "layer = signeGeoportal.xMap.map.getLayer(record.data.layer.id);",
                    "",
                    "if (layer){",
                    "    Ext.MessageBox.show({",
                    "        title : 'Eliminar Capa',",
                    "        buttons : Ext.MessageBox.YESNO,",
                    "        msg : 'Realmente desea eliminar la capa ' + record.data.layer.name +  ' del mapa ?',",
                    "        icon : Ext.Msg.WARNING,",
                    "        fn : function(btn)",
                    "        {",
                    "            if (btn == 'yes')",
                    "            {",
                    "                signeGeoportal.xMap.map.removeLayer(layer);",
                    "            }",
                    "",
                    "        }",
                    "    });",
                    "}",
                    "",
                    "",
                    ""
                ],
                "name": "click"
            },
            "name": "onBtnEliminarCapaClick",
            "designerId": "c0698dc8-8eeb-4965-a752-0c1242a76e25"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#btnImprimir",
                "designer|params": [
                    "button",
                    "e",
                    "eOpts"
                ],
                "designer|targetType": "Ext.button.Button",
                "fn": "onBtnImprimirClick",
                "implHandler": [
                    "/*** Funcional ****/",
                    "printDialog = Ext.create('Ext.Window', {",
                    "    title: \"Vista previa de impresi√≥n\",",
                    "    layout: \"fit\",",
                    "    border: false,",
                    "    width: 500,",
                    "    modal: true,",
                    "   // autoHeight: true,",
                    "    items: [{",
                    "        xtype: 'textfield',",
                    "        fieldLabel: 'Titulo',",
                    "        id: 'txtTitulo',",
                    "        anchor: '90%',",
                    "    },{",
                    "        xtype: \"gx_printmappanel\",",
                    "        sourceMap: signeGeoportal.xMap,",
                    "        printProvider: printProvider",
                    "    }],",
                    "    tbar: [{",
                    "        text: \"Imprimir PDF\",",
                    "        handler: function(){",
                    "            printDialog.items.get(1).printProvider.customParams.mapTitle = Ext.getCmp('txtTitulo').getValue();",
                    "            printDialog.items.get(1).print();",
                    "        }",
                    "    }]",
                    "});",
                    "",
                    "printDialog.show();",
                    "",
                    ""
                ],
                "name": "click"
            },
            "name": "onBtnImprimirClick",
            "designerId": "e0c461fd-c825-4b3f-be06-62b84c273af4"
        }
    ]
}